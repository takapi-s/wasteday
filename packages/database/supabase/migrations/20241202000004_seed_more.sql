-- 追加初期データの投入\n\n-- 除外ルール（例: 学習系YouTubeチャンネル除外、特定パス/クエリ）\nINSERT INTO exclusion_rules (category_id, rule_type, pattern, description, is_active)\nSELECT id, 'channel_id', 'UCYO_jab_esuFRV4b17AJtAw', '3Blue1Brown (学習) 除外', true FROM waste_categories WHERE type='domain' AND identifier='youtube.com'\nON CONFLICT DO NOTHING;\n\nINSERT INTO exclusion_rules (category_id, rule_type, pattern, description, is_active)\nSELECT id, 'path', '/courses', 'コースサイト配下を除外', true FROM waste_categories WHERE type='domain' AND identifier='youtube.com'\nON CONFLICT DO NOTHING;\n\n-- 日次集計（本日分のゼロ初期化）\nINSERT INTO daily_summaries (date, total_waste_seconds, total_active_seconds, waste_ratio_active, waste_ratio_24h, goal_seconds, goal_achieved, top_categories, hourly_breakdown)\nVALUES (CURRENT_DATE, 0, 0, 0, 0, 3600, false, '[]', '{}'::jsonb)\nON CONFLICT (date) DO NOTHING;\n\n-- 週次集計（今週月曜起点でゼロ初期化）\nWITH week_start AS (\n  SELECT (date_trunc('week', CURRENT_DATE::timestamp)::date + 1) AS monday -- ISO週の月曜日\n)\nINSERT INTO weekly_summaries (week_start_date, total_waste_seconds, total_active_seconds, average_daily_waste_seconds, waste_ratio_active, waste_ratio_24h, goal_achieved_days, top_categories, daily_breakdown)\nSELECT monday, 0, 0, 0, 0, 0, 0, '[]', '{}'::jsonb FROM week_start\nON CONFLICT (week_start_date) DO NOTHING;\n\n-- 通知ログ（ウェルカム）\nINSERT INTO notification_logs (notification_type, title, message, is_read, metadata)\nVALUES ('info', 'Wasteday セットアップ', '初期データを投入しました。トラッキングを開始できます。', false, '{"source":"migration"}'::jsonb);\n